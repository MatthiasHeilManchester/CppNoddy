\doxysubsection{Tests/\+Matrix/\+Matrix\+Access.cpp File Reference}
\label{MatrixAccess_8cpp}\index{Tests/Matrix/MatrixAccess.cpp@{Tests/Matrix/MatrixAccess.cpp}}
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$Timer.\+h$>$}\newline
{\ttfamily \#include $<$Types.\+h$>$}\newline
{\ttfamily \#include $<$Utility.\+h$>$}\newline
{\ttfamily \#include $<$Two\+D\+\_\+\+Node\+\_\+\+Mesh.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../\+Utils\+\_\+\+Fill.\+h\char`\"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \textbf{ main} ()
\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
A quick check that the overhead associated with the matrix container class is less than 5\% compared to a native array. 

\doxysubsubsection{Function Documentation}
\mbox{\label{MatrixAccess_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{MatrixAccess.cpp@{MatrixAccess.cpp}!main@{main}}
\index{main@{main}!MatrixAccess.cpp@{MatrixAccess.cpp}}
\doxyparagraph{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 19 of file Matrix\+Access.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21 }
\DoxyCodeLine{22   cout << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{23   cout << \textcolor{stringliteral}{"=== Matrix: compare access speeds to native array ===\(\backslash\)n"};}
\DoxyCodeLine{24   cout << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{25 }
\DoxyCodeLine{26   \textcolor{keyword}{const} std::size\_t L = 5000;}
\DoxyCodeLine{27   \textcolor{keyword}{const} \textcolor{keywordtype}{int} loops( 100 );}
\DoxyCodeLine{28   \textcolor{comment}{// DenseMatrix object}}
\DoxyCodeLine{29   DenseMatrix<double> A( L, L, 0.0 );}
\DoxyCodeLine{30   \textcolor{comment}{// A TwoD\_Node\_Mesh object (coordinates of the mesh don't matter)}}
\DoxyCodeLine{31   \textcolor{keyword}{const} DenseVector<double> coords( Utility::uniform\_node\_vector( 0.0, 1.0, L ) );}
\DoxyCodeLine{32   TwoD\_Node\_Mesh<double> M( coords, coords, 1 );}
\DoxyCodeLine{33   \textcolor{comment}{// native array}}
\DoxyCodeLine{34   \textcolor{keywordtype}{double}* B;}
\DoxyCodeLine{35   B = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[ L * L ];}
\DoxyCodeLine{36   \textcolor{comment}{// put some junk into the DenseMatrix}}
\DoxyCodeLine{37   Utils\_Fill::fill\_random( A );}
\DoxyCodeLine{38   \textcolor{comment}{// copy the matrix to a native array \& the mesh object}}
\DoxyCodeLine{39   \textcolor{keywordflow}{for} ( std::size\_t row = 0; row < L; ++row )}
\DoxyCodeLine{40   \{}
\DoxyCodeLine{41     \textcolor{keywordflow}{for} ( std::size\_t col = 0; col < L; ++col )}
\DoxyCodeLine{42     \{}
\DoxyCodeLine{43       B[ row * L + col ] = A( row, col );}
\DoxyCodeLine{44       M( row, col, 0 ) = A( row, col );}
\DoxyCodeLine{45     \}}
\DoxyCodeLine{46   \}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48   cout << \textcolor{stringliteral}{" DenseMatrix<double> scaling on a per-\/element basis via access operator.\(\backslash\)n"};}
\DoxyCodeLine{49   Timer timer;}
\DoxyCodeLine{50   timer.start();}
\DoxyCodeLine{51   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < loops; ++i )}
\DoxyCodeLine{52   \{}
\DoxyCodeLine{53     \textcolor{keywordflow}{for} ( std::size\_t row = 0; row < L; ++row )}
\DoxyCodeLine{54     \{}
\DoxyCodeLine{55       \textcolor{keywordflow}{for} ( std::size\_t col = 0; col < L; ++col )}
\DoxyCodeLine{56       \{}
\DoxyCodeLine{57         A( row, col ) *= 2.0;}
\DoxyCodeLine{58       \}}
\DoxyCodeLine{59     \}}
\DoxyCodeLine{60   \}}
\DoxyCodeLine{61   timer.stop();}
\DoxyCodeLine{62   \textcolor{keywordtype}{double} timeA = timer.get\_time();}
\DoxyCodeLine{63   timer.print();}
\DoxyCodeLine{64   timer.reset();}
\DoxyCodeLine{65 }
\DoxyCodeLine{66   cout << \textcolor{stringliteral}{"\(\backslash\)n TwoD\_Node\_Mesh<double> scaling on a per-\/element basis via access operator.\(\backslash\)n"};}
\DoxyCodeLine{67   timer.start();}
\DoxyCodeLine{68   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < loops; ++i )}
\DoxyCodeLine{69   \{}
\DoxyCodeLine{70     \textcolor{keywordflow}{for} ( std::size\_t row = 0; row < L; ++row )}
\DoxyCodeLine{71     \{}
\DoxyCodeLine{72       \textcolor{keywordflow}{for} ( std::size\_t col = 0; col < L; ++col )}
\DoxyCodeLine{73       \{}
\DoxyCodeLine{74         M( row, col, 0 ) *= 2.0;}
\DoxyCodeLine{75       \}}
\DoxyCodeLine{76     \}}
\DoxyCodeLine{77   \}}
\DoxyCodeLine{78   timer.stop();}
\DoxyCodeLine{79   \textcolor{keywordtype}{double} timeM = timer.get\_time();}
\DoxyCodeLine{80   timer.print();}
\DoxyCodeLine{81   timer.reset();}
\DoxyCodeLine{82 }
\DoxyCodeLine{83   cout << \textcolor{stringliteral}{"\(\backslash\)n Native array scaling on a per-\/element basis.\(\backslash\)n"};}
\DoxyCodeLine{84   timer.start();}
\DoxyCodeLine{85   \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i = 0; i < loops; ++i )}
\DoxyCodeLine{86   \{}
\DoxyCodeLine{87     \textcolor{keywordflow}{for} ( std::size\_t row = 0; row < L; ++row )}
\DoxyCodeLine{88     \{}
\DoxyCodeLine{89       \textcolor{keywordflow}{for} ( std::size\_t col = 0; col < L; ++col )}
\DoxyCodeLine{90       \{}
\DoxyCodeLine{91         B[ row * L + col ] *= 2.0;}
\DoxyCodeLine{92       \}}
\DoxyCodeLine{93     \}}
\DoxyCodeLine{94   \}}
\DoxyCodeLine{95   timer.stop();}
\DoxyCodeLine{96   \textcolor{keywordtype}{double} timeB = timer.get\_time();}
\DoxyCodeLine{97   timer.print();}
\DoxyCodeLine{98   timer.reset();}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   \textcolor{keyword}{delete}[] B;}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 }
\DoxyCodeLine{103   cout << \textcolor{stringliteral}{"The \% slow-\/down for a DenseMatrix was "} <<}
\DoxyCodeLine{104     100.0 * ( timeA -\/ timeB ) / ( 0.5 * ( timeA + timeB ) ) << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106   cout << \textcolor{stringliteral}{"The \% slow-\/down for a TwoD\_Node\_Mesh was "} <<}
\DoxyCodeLine{107     100.0 * ( timeM -\/ timeB ) / ( 0.5 * ( timeM + timeB ) ) << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{108 }
\DoxyCodeLine{109   }
\DoxyCodeLine{110   \textcolor{keywordtype}{bool} failed( \textcolor{keyword}{false} );}
\DoxyCodeLine{111   \textcolor{comment}{// fail if there is more than a 5\% overhead between DenseMatrix \& native}}
\DoxyCodeLine{112   \textcolor{keywordflow}{if} ( ( timeA -\/ timeB ) / ( 0.5 * ( timeA + timeB ) ) > 0.05 )}
\DoxyCodeLine{113   \{}
\DoxyCodeLine{114     failed = \textcolor{keyword}{true};}
\DoxyCodeLine{115     cout << \textcolor{stringliteral}{"The \% slow-\/down for a DenseMatrix was "} <<}
\DoxyCodeLine{116          100.0 * ( timeA -\/ timeB ) / ( 0.5 * ( timeA + timeB ) ) << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{117   \}}
\DoxyCodeLine{118   \textcolor{comment}{// fail if there is more than a 5\% overhead between DenseMatrix \& TwoD\_Node\_Mesh}}
\DoxyCodeLine{119   \textcolor{keywordflow}{if} ( std::abs( timeM -\/ timeB ) / ( 0.5 * ( timeM + timeB ) ) > 0.05 )}
\DoxyCodeLine{120   \{}
\DoxyCodeLine{121     failed = \textcolor{keyword}{true};}
\DoxyCodeLine{122     cout << \textcolor{stringliteral}{"The \% slow-\/down for a TwoD\_Node\_Mesh was "} <<}
\DoxyCodeLine{123          100.0 * ( timeM -\/ timeB ) / ( 0.5 * ( timeM + timeB ) ) << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{124   \}}
\DoxyCodeLine{125 }
\DoxyCodeLine{126   \textcolor{keywordflow}{if} ( failed )}
\DoxyCodeLine{127   \{}
\DoxyCodeLine{128     cout << \textcolor{stringliteral}{"\(\backslash\)033[1;31;48m  * FAILED \(\backslash\)033[0m\(\backslash\)n"};}
\DoxyCodeLine{129     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{130   \}}
\DoxyCodeLine{131   \textcolor{keywordflow}{else}}
\DoxyCodeLine{132   \{}
\DoxyCodeLine{133     cout << \textcolor{stringliteral}{"\(\backslash\)033[1;32;48m  * PASSED \(\backslash\)033[0m\(\backslash\)n"};}
\DoxyCodeLine{134     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{135   \}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 \}}

\end{DoxyCode}


References Cpp\+Noddy\+::\+Example\+::\+A(), Cpp\+Noddy\+::\+Example\+::failed, Utils\+\_\+\+Fill\+::fill\+\_\+random(), Cpp\+Noddy\+::\+Timer\+::get\+\_\+time(), Cpp\+Noddy\+::\+Timer\+::print(), Cpp\+Noddy\+::\+Timer\+::reset(), Cpp\+Noddy\+::\+Timer\+::start(), Cpp\+Noddy\+::\+Timer\+::stop(), and Cpp\+Noddy\+::\+Utility\+::uniform\+\_\+node\+\_\+vector().

