\doxysubsection{Tests/\+H\+Y\+P\+\_\+1\+D/\+H\+Y\+P\+Radial\+Dam\+Break.cpp File Reference}
\label{HYPRadialDamBreak_8cpp}\index{Tests/HYP\_1D/HYPRadialDamBreak.cpp@{Tests/HYP\_1D/HYPRadialDamBreak.cpp}}
{\ttfamily \#include $<$One\+D\+\_\+\+H\+Y\+P\+\_\+bundle.\+h$>$}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \textbf{ Cpp\+Noddy\+::\+Example\+::\+Shallow\+\_\+1d\+\_\+rad}
\begin{DoxyCompactList}\small\item\em Define the system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \textbf{ Cpp\+Noddy}
\begin{DoxyCompactList}\small\item\em A collection of OO numerical routines aimed at simple (typical) applied problems in continuum mechanics. \end{DoxyCompactList}\item 
 \textbf{ Cpp\+Noddy\+::\+Example}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \{ \textbf{ h}, 
\textbf{ hu}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \textbf{ Cpp\+Noddy\+::\+Example\+::g} (1.\+0)
\begin{DoxyCompactList}\small\item\em gravitational acceleration \end{DoxyCompactList}\item 
double \textbf{ Cpp\+Noddy\+::\+Example\+::A} (1.\+0)
\begin{DoxyCompactList}\small\item\em initial hump amplitude \end{DoxyCompactList}\item 
void \textbf{ Cpp\+Noddy\+::\+Example\+::\+Q\+\_\+init} (const double \&x, \textbf{ Dense\+Vector}$<$ double $>$ \&q)
\begin{DoxyCompactList}\small\item\em Set the initial state of the system. \end{DoxyCompactList}\item 
int \textbf{ main} ()
\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
Solve the shallow water equations in one dimension for an initial column of fluid \[ h_t + (uh)_r = -hu/r \] \[ (uh)_t + (hu^2 + gh^2 /2 )_r = -hu^2/r \] The result is compared to the same problem solved using Clawpack, evaluated at the single point x=0.\+5. 

\doxysubsubsection{Enumeration Type Documentation}
\mbox{\label{HYPRadialDamBreak_8cpp_af9bdc3014f3d54c426b6d2df10de4960}} 
\doxyparagraph{anonymous enum}
{\footnotesize\ttfamily anonymous enum}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{h@{h}!HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}}\index{HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}!h@{h}}}\mbox{\label{HYPRadialDamBreak_8cpp_af9bdc3014f3d54c426b6d2df10de4960a83684c9789c44b5b6edca6ae4ae1eeb5}} 
h&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{hu@{hu}!HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}}\index{HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}!hu@{hu}}}\mbox{\label{HYPRadialDamBreak_8cpp_af9bdc3014f3d54c426b6d2df10de4960afc3731650aa9889db2b97824edc60cea}} 
hu&\\
\hline

\end{DoxyEnumFields}


Definition at line 13 of file H\+Y\+P\+Radial\+Dam\+Break.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{13 \{ h, hu \};}

\end{DoxyCode}


\doxysubsubsection{Function Documentation}
\mbox{\label{HYPRadialDamBreak_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}!main@{main}}
\index{main@{main}!HYPRadialDamBreak.cpp@{HYPRadialDamBreak.cpp}}
\doxyparagraph{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyRefDesc}{Todo}
\item[\textbf{ Todo}]Include a mechanism for avoiding source term computations at the singular point by indicating where edge conditions are specified. For the time being, we\textquotesingle{}ll bodge it by stopping away from x=0. \end{DoxyRefDesc}


Definition at line 75 of file H\+Y\+P\+Radial\+Dam\+Break.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{76 \{}
\DoxyCodeLine{77   cout << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{78   cout << \textcolor{stringliteral}{"=== Hyperbolic: Shallow water radial dam break ======\(\backslash\)n"};}
\DoxyCodeLine{79   cout << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{80 }
\DoxyCodeLine{81   \textcolor{comment}{// There is a singular source\_fn at r=0, so we bodge it here (for now).}\textcolor{comment}{}}
\DoxyCodeLine{82 \textcolor{comment}{  /// \(\backslash\)todo Include a mechanism for avoiding source term computations}}
\DoxyCodeLine{83 \textcolor{comment}{  /// at the singular point by indicating where edge conditions are specified.}}
\DoxyCodeLine{84 \textcolor{comment}{  /// For the time being, we'll bodge it by stopping away from x=0.}}
\DoxyCodeLine{85 \textcolor{comment}{}  \textcolor{keyword}{const} \textcolor{keywordtype}{double} left =  1.e-\/4;}
\DoxyCodeLine{86   \textcolor{keyword}{const} \textcolor{keywordtype}{double} right = 2.5;}
\DoxyCodeLine{87   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} N = 2001;}
\DoxyCodeLine{88   DenseVector<double> faces\_x = Utility::power\_node\_vector( left, right, N, 1.0 );}
\DoxyCodeLine{89 }
\DoxyCodeLine{90   \textcolor{comment}{// time}}
\DoxyCodeLine{91   \textcolor{keywordtype}{double} t = 0;}
\DoxyCodeLine{92   \textcolor{keywordtype}{double} t\_end = 0.5;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94   \textcolor{comment}{// hyperbolic problem}}
\DoxyCodeLine{95   Example::Shallow\_1d\_rad conservative\_problem;}
\DoxyCodeLine{96   OneD\_TVDLF\_Mesh Shallow\_mesh( faces\_x, \&conservative\_problem, Example::Q\_init );}
\DoxyCodeLine{97   Shallow\_mesh.set\_limiter( 0 );}
\DoxyCodeLine{98 }
\DoxyCodeLine{99   \textcolor{comment}{// output}}
\DoxyCodeLine{100   \textcolor{keywordtype}{int} loop\_counter( 0 );}
\DoxyCodeLine{101   \textcolor{keywordtype}{int} file\_counter( 0 );}
\DoxyCodeLine{102 }
\DoxyCodeLine{103   std::string dirname(\textcolor{stringliteral}{"./DATA"});}
\DoxyCodeLine{104   mkdir( dirname.c\_str(), S\_IRWXU );}
\DoxyCodeLine{105   std::string filename\_stub;}
\DoxyCodeLine{106   filename\_stub = \textcolor{stringliteral}{"./DATA/HYP\_shallow\_rad"};}
\DoxyCodeLine{107   TrackerFile my\_file( 5 );}
\DoxyCodeLine{108   OneD\_Node\_Mesh<double> soln = Shallow\_mesh.get\_soln();}
\DoxyCodeLine{109   my\_file.push\_ptr( \&soln, \textcolor{stringliteral}{"mesh"} );}
\DoxyCodeLine{110 }
\DoxyCodeLine{111   \textcolor{keywordflow}{do}}
\DoxyCodeLine{112   \{}
\DoxyCodeLine{113     \textcolor{keywordflow}{if} ( loop\_counter \% 50 == 0 )}
\DoxyCodeLine{114     \{}
\DoxyCodeLine{115       my\_file.set\_filename( filename\_stub + Utility::stringify( file\_counter ) + \textcolor{stringliteral}{".dat"} );}
\DoxyCodeLine{116       soln = Shallow\_mesh.get\_soln();}
\DoxyCodeLine{117       my\_file.update();}
\DoxyCodeLine{118       file\_counter += 1;}
\DoxyCodeLine{119     \}}
\DoxyCodeLine{120     t += Shallow\_mesh.update( 0.499, t\_end -\/ t );}
\DoxyCodeLine{121     ++loop\_counter;}
\DoxyCodeLine{122   \}}
\DoxyCodeLine{123   \textcolor{keywordflow}{while} ( ( t < t\_end ) \&\& ( loop\_counter < 3000 ) );}
\DoxyCodeLine{124 }
\DoxyCodeLine{125   \textcolor{comment}{// we test the result against the Clawpack computational result}}
\DoxyCodeLine{126   soln = Shallow\_mesh.get\_soln();}
\DoxyCodeLine{127   \textcolor{keywordtype}{double} h\_clawpack( 1.13466 );}
\DoxyCodeLine{128   \textcolor{keywordtype}{double} h\_test( soln.get\_interpolated\_vars( 0.5 )[ h ] );}
\DoxyCodeLine{129   \textcolor{keywordflow}{if} ( abs( h\_test -\/ h\_clawpack ) > 1.e-\/3 )}
\DoxyCodeLine{130   \{}
\DoxyCodeLine{131     cout << \textcolor{stringliteral}{"\(\backslash\)033[1;31;48m  * FAILED \(\backslash\)033[0m\(\backslash\)n"};}
\DoxyCodeLine{132     cout << \textcolor{stringliteral}{" deviation from the Clawpack data = "} << abs( h\_test -\/ h\_clawpack ) << \textcolor{stringliteral}{"\(\backslash\)n"};}
\DoxyCodeLine{133     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{134   \}}
\DoxyCodeLine{135   \textcolor{keywordflow}{else}}
\DoxyCodeLine{136   \{}
\DoxyCodeLine{137     cout << \textcolor{stringliteral}{"\(\backslash\)033[1;32;48m  * PASSED \(\backslash\)033[0m\(\backslash\)n"};}
\DoxyCodeLine{138     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{139   \}}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 \} \textcolor{comment}{// end of main()}}

\end{DoxyCode}


References Cpp\+Noddy\+::\+One\+D\+\_\+\+Node\+\_\+\+Mesh$<$ \+\_\+\+Type, \+\_\+\+Xtype $>$\+::get\+\_\+interpolated\+\_\+vars(), Cpp\+Noddy\+::\+One\+D\+\_\+\+T\+V\+D\+L\+F\+\_\+\+Mesh\+::get\+\_\+soln(), h, Cpp\+Noddy\+::\+Utility\+::power\+\_\+node\+\_\+vector(), Cpp\+Noddy\+::\+Tracker\+File\+::push\+\_\+ptr(), Cpp\+Noddy\+::\+Example\+::\+Q\+\_\+init(), Cpp\+Noddy\+::\+Tracker\+File\+::set\+\_\+filename(), Cpp\+Noddy\+::\+One\+D\+\_\+\+T\+V\+D\+L\+F\+\_\+\+Mesh\+::set\+\_\+limiter(), Cpp\+Noddy\+::\+Utility\+::stringify(), Cpp\+Noddy\+::\+Tracker\+File\+::update(), and Cpp\+Noddy\+::\+One\+D\+\_\+\+T\+V\+D\+L\+F\+\_\+\+Mesh\+::update().

